
<div class="row" id="product">

    <div class="col-xs-12 col-main col-md-12 col-sm-12 ">
        <div itemscope itemtype="http://schema.org/Product" class="product">
            <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
            <meta itemprop="image" content="{{ product.featured_image.src | product_img_url: 'grande' }}">


            <div class="row">
                {% if settings.style_thumb_image == 'horizontal'%}
                    {% if product.images.size == 0 %}
                        <div class="col-xs-12 col-sm-12 col-md-4 hidden-xs">
                            <img src="{{ '' | product_img_url: 'grande' }}" alt="">
                        </div>
                    {% else %}
                        {% if product.images.size > 1 %} 
                            <div class=" col-xs-12 col-sm-1 col-md-1 hidden-xs">
                            <div id="zt_list_product" class="thumbs {% if settings.style_moreview == 'horizontal' %}more-view-wrapper-jcarousel{% else %} more-view-wrapper-owlslider {% endif %}">
                                    <ul id="more-view-carousel" class="product-photo-thumbs jcarousel-skin-tango">
                                        {% for image in product.images %}
                                            <li class="image-item">
                                                <a href="javascript:void(0)" data-image="{{ image.src | product_img_url: 'master' }}" data-zoom-image="{{ image.src | product_img_url: 'master' }}">
                                                    <img src="{{ image.src | product_img_url: 'master' }}" alt="{{ image.alt | escape }}">
                                                </a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                            </div>
                            </div>
                        {% endif %}
                        <div class="col-xs-12 col-sm-5 col-md-5 hidden-xs">
                            {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
                            <a href="{{ featured_image | img_url: 'master' }}" class="zoom" id="placeholder" >
                                <img id="product-featured-image" src="{{ featured_image | img_url: 'master' }}" alt="{{ featured_image.alt | escape }}" data-zoom-image="{{ featured_image.src | img_url: 'master' }}"/>
                            </a>
                        </div>
                    {% endif %}
                {% endif %}
                {% if settings.style_thumb_image == 'ticky'%}
                    <div class="col-md-6 col-sm-6 product-img-box hidden-xs">
                        <div class="image-items" >
                            {% for image in product.images %}
                                <a style="padding-bottom:15px;display:inline-block;width:100%;clear:both" href="javascript:void(0)" data-image="{{ image.src | product_img_url: 'master' }}" data-zoom-image="{{ image.src | product_img_url: 'master' }}">
                                    <img src="{{ image.src | product_img_url: 'master' }}" alt="{{ image.alt | escape }}">
                                </a>
                        {% endfor %}
                        </div>
                    </div>
                {% endif %}
                {% if settings.style_thumb_image == 'vertical'%}
                    <div class="col-md-5 col-sm-4 product-img-box hidden-xs">
                        {% if product.images.size == 0 %}
                            <img src="{{ '' | product_img_url: 'grande' }}" alt="">
                        {% else %}
                            {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
                            <a href="{{ featured_image | img_url: 'master' }}" class="zoom" id="placeholder" >
                                <img id="product-featured-image" src="{{ featured_image | img_url: 'master' }}" alt="{{ featured_image.alt | escape }}" data-zoom-image="{{ featured_image.src | img_url: 'master' }}"/>
                            </a>
                                {% if product.images.size > 1 %}		
                                    <div id="zt_list_product" class="thumbs">
                                        {% for image in product.images %}
                                            <div class="image-item">
                                                <a href="javascript:void(0)" data-image="{{ image.src | product_img_url: 'master' }}" data-zoom-image="{{ image.src | product_img_url: 'master' }}">
                                                    <img src="{{ image.src | product_img_url: 'master' }}" alt="{{ image.alt | escape }}">
                                                </a>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% endif %}
                            {% endif %}
                    </div>
                {% endif %}
                <div class="hidden-md hidden-lg hidden-sm col-xs-12 product-image-mobile">
                    {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
                    <div class="product_owl image-mobile" id="product_owl">
                        {% for image in product.images %}
                            <div class="item">
                                <img class="img-responsive" data-image="{{ image.src | product_img_url: 'master' }}" src="{{ image.src | img_url: '1024x1024' }}" alt="{{ image.alt | escape }}" />
                            </div>
                        {% endfor %}
                    </div>
                </div>
                {% if settings.style_thumb_image == 'vertical'%}
                    <div class="col-xs-12 col-md-7 col-sm-8 product-shop">
                    {% else %}
                        <div class="col-xs-12 col-md-6 col-sm-6 product-shop">
                        {% endif %}
                        <div>
                            <header class="product-title {% if collection.previous_product or collection.next_product and settings.display_prev_next_product and collection %}has-btn{% endif %}">
                                <h1 itemprop="name" style="margin-bottom: 0px;">{{ product.title }}</h1>
                                {% if settings.display_prev_next_product and collection %}
                                    {% if collection.previous_product %}
                                        <a class="prev btn" href="{{ collection.next_product }}" title="Prev">{{'typo_product.detail.product_prev' | t}}</a>
                                    {% endif %}
                                    {% if collection.next_product %}
                                        <a class="next btn" href="{{ collection.next_product }}" title="Next">{{'typo_product.detail.product_next' | t}}</a>
                                    {% endif %}
                                {% endif %}
                            </header>
                            <p class="product-sku"> {% assign current_variant = product.selected_or_first_available_variant %}
                            <span class="variant-sku sku">{{ current_variant.sku }}</span>
                            </p>
                            <p class="short-description">{{ product.description | strip_html | truncatewords: 30 }}</p>
                            {% if settings.display_product_reviews %}       
                                <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>
                            {% endif %}		
                            <form action="/cart/add" method="post" enctype="multipart/form-data" id="add-to-cart-form">
                                <div id="product-variants">
                                    {% assign variantCount = product.variants | size %}
                                    {% if product.available %} 
                                        {% if variantCount > 1 %}	
                                            <!-- <h3>Auswählen</h3> -->
                                            <div class="header">{{ swatch }}</div>
                                            <select id="product-selectors" name="id">
                                                {% for variant in product.variants %}
                                                    <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money }}</option> 
                                                {% endfor %}
                                            </select>

                                        {% else %}
                                            <input type="hidden" name="id" value="{{ product.variants[0].id }}" />
                                        {% endif %}
                                    {% endif %}
                                </div>

                                <div class="prices">
                                    {% if product.compare_at_price > product.price %}
                                    <span class="compare-price">{{ product.compare_at_price_max | money }}</span>
                                {% endif %}
                                        <span class="price on-sale" itemprop="price">{{ product.price | money }}</span>
                                </div>
                                <div class="price-info">inkl. MwSt. <a href="/pages/versand">zzgl. Versandkosten</a></div>
                                <div style="clear:both;"></div>
                                

                                {% if product.available %} 
                                    <div class="dec button">{{'typo_product.detail.qty' | t }}:</div>
                                    <div class="wrap-qty">
                                        <div class="custom-qty">
                                            <input type="text" id="quantity" name="quantity" value="1">
                                            <div class="btn-plus">
                                                <span class="up-qty"><i class="fa fa-plus"></i></span>
                                                <span class="down-qty"><i class="fa fa-minus"></i></span>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" name="add" data-toggle="tooltip" data-placement="top" title="{{'typo_product.detail.add_cart' | t }}" class="btn" id="product-add-to-cart">{{'typo_product.detail.add_cart' | t }}</button>          
                                {% else %} 
                                    <button type="submit" name="add" class="btn" id="product-add-to-cart" disabled>{{'typo_product.detail.unavailable' | t }}</button>  
                                {% endif %} 
                            </form>


                            {% include 'wishlist-product' %}


                        </div>
                        <div style="color:#000; font-size:10pt; margin-top:3%">
                            <ul class="fa-ul">
                                <li>
                                    {% if settings.display_availability or settings.display_product_type or settings.display_vendor %}

                                        <!-- label ausblenden
                                        <span class="fa-li"><i class="fa fa-check"></i></span><strong>Verfügbarkeit</strong> 
                                        -->
                                        <div class="availability">


                                            <span class="product-inventory">
                                                    {% assign first_inventory = product.selected_or_first_available_variant.inventory_quantity %}
                                                    <span class="nowavailable" {% if first_inventory < 3 %} style="display:none;"{% endif %} >Sofort verfügbar</span>
                                                    <span class="fewavailable" {% if first_inventory < 1 or first_inventory > 2 %} style="display:none;" {% endif %}>Nur noch wenige verfügbar</span>
                                                    <span class="notavailable" {% if first_inventory > 0 %} style="display:none;"{% endif %}>Zurzeit nicht verfügbar</span>
                                            </span>
                                        </div>
                                    {% endif %}


                                </li>
                            <li><span class="fa-li"><i class="fa fa-truck"></i></span><strong>Lieferzeit</strong> - <span class="meta shipping time">
                                {% if first_inventory == 0 and product.tags     contains "kissen" %}
                                    3 - 4 Wochen
                                {% else %}
                                {% if product.metafields.shipping.time %}{{ product.metafields.shipping.time }}{% else %}<a href="/page/versand">Versandinformationen</a>{% endif %}
                                {% endif %}
                                    </span></li>
                            <li><span class="fa-li"><i class="fa fa-history"></i></span><strong>Versandkosten</strong> - <span class="meta shipping cost">{% if product.metafields.shipping.cost %}{{ product.metafields.shipping.cost }}{% else %}<a href="/page/versand">Versandinformationen</a>{% endif %}</span></li>
                            </ul>
                        </div>
                             

                        <div class="product_socials_wrapper_inner" style="font-size:20px;"> 
                            <h5>Produkt weiterempfehlen: </h5>
                            {% capture share_url %}{{ shop.url }}{{ product.url }}{% endcapture %}

                            <a href="https://api.whatsapp.com/send?phone=&text=https://api.whatsapp.com/send?phone=&text=Hey%20:)%20das%20finde%20ich%20ziemlich%20cool:%20{{ share_url }}{{ product.title }}%20Was%20meinst%20du%20dazu%3F" target="_blank" class="whatsapp" title="Whatsapp"><i class="fa fa-whatsapp"></i></a>
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ share_url }}" target="_blank" class="facebook" title="Facebook"><i class="fa fa-facebook"></i></a>
                            <a href="//pinterest.com/pin/create/button/?url={{ share_url }}&description={{ product.title }}&media={{ featured_image.src | img_url: 'original' }}" target="_blank" class="pinterest" title="vimeo"><i class="fa fa-pinterest"></i></a>

                        </div>
                        </div>
                    </div>
            </div>

            <div class="product-tabs ">
                <div class="product-tabs-title">
                    <ul class="nav nav-tabs" id="myTab">
                        {% if settings.display_product_detail_description %}
                            <li class="active"><a data-toggle="tab" href="#collapse-tab1">{{ settings.product_description_title }}</a></li>
                        {% endif %}
                        {% if settings.display_product_reviews %}       
                            <li><a data-toggle="tab" href="#collapse-tab2">{{ settings.product_review_title }}</a></li>
                        {% endif %}
                    </ul>
                </div>
                <div id="myTabContent" class="tab-content">
                    {% if settings.display_product_detail_description %}
                        <div id="collapse-tab1" class="tab-pane fade in active">
                            <div data-station-tabs-app>{{ product.description }}</div>

                            <h2 style="font-size: 18px; font-weight: 600; text-transform:uppercase;">Wichtige Produktinformationen</h2>


                            <div class="description-meta">
                                <div class="meta specs length" {% unless product.metafields.specs.length %}style="display:none;"{% endunless %}>Länge: <span>{{ product.metafields.specs.length }}</span> cm</div>
                                <div class="meta specs width" {% unless product.metafields.specs.width %}style="display:none;"{% endunless %}>Breite: <span>{{ product.metafields.specs.width }}</span> cm</div>
                                <div class="meta specs depth" {% unless  product.metafields.specs.depth %}style="display:none;"{% endunless %}>Tiefe: <span>{{ product.metafields.specs.depth }}</span> cm</div>
                                <div class="meta specs height" {% unless  product.metafields.specs.height %}style="display:none;"{% endunless  %}>Höhe: <span>{{ product.metafields.specs.height }}</span> cm</div>
                                <div class="meta specs diameter" {% unless  product.metafields.specs.diameter %}style="display:none;"{% endunless  %}>Durchmesser: <span>{{ product.metafields.specs.diameter }}</span> cm</div>
                                <div class="meta specs seatingheight" {% unless  product.metafields.specs.seatingheight %}style="display:none;"{% endunless  %}>Sitzhöhe: <span>{{ product.metafields.specs.seatingheight }}</span> cm</div>
                                <div class="meta specs seatingdepth" {% unless  product.metafields.specs.seatingdepth %}style="display:none;"{% endunless  %}>Sitztiefe: <span>{{ product.metafields.specs.seatingdepth }}</span> cm</div>
                                <div class="meta specs maxlength" {% unless  product.metafields.specs.maxlength %}style="display:none;"{% endunless  %}>Max. Ausziehlänge: <span>{{ product.metafields.specs.maxlength }}</span> cm</div>
                                <div class="meta weight" {% unless  product.weight %}style="display:none;"{% endunless  %}>Gewicht: <span>{{product.weight / 1000 }}</span> kg</div>
                                <div class="meta specs form" {% unless  product.metafields.specs.form %}style="display:none;"{% endunless  %}>Form: <span>{{ product.metafields.specs.form }}</span></div>
                                <div class="meta specs feature" {% unless  product.metafields.specs.feature %}style="display:none;"{% endunless  %}>Funktion: <span>{{ product.metafields.specs.feature }}</span></div>
                            </div>
                </div>
            </div>
                        {% endif %}



                        {% if settings.display_product_reviews %}       
                            <div id="collapse-tab2" class="tab-pane fade">
                                {% comment %}
                                Add product review widget, must install Product Review App:
                                https://apps.shopify.com/product-reviews
                                {% endcomment %}
                                <div id="shopify-product-reviews" data-id="{{product.id}}">{{ product.metafields.spr.reviews }}</div>
                            </div>
                        {% endif %}
                        </div>
        </div>

        <script>
            jQuery('#myTab a').click(function (e) {
                e.preventDefault();
                jQuery(this).tab('show');
            })
        </script>



        {{ 'option_selection.js' | shopify_asset_url | script_tag }}

    </div>

</div>


{% capture 'meta_data' %}
    {% for variant in product.variants %}
        {{ variant.sku | json }}: {
        specs: {{ variant.metafields.specs | json }},
        shipping: {{ variant.metafields.shipping | json }},
        inventory_quantity: {{ variant.inventory_quantity | json }},
        is_pillow_empty: {% if variant.inventory_quantity == 0 and product.tags contains "kissen" %}true{% else %}false{% endif %}
        }
        {% unless forloop.last %},{% endunless %}
    {% endfor %}
{% endcapture %}

<script>
    console.log("product:", {{ product | json }} );
    var productMetaData = {
        specs: {{ product.metafields.specs | json }},
        shipping: {{ product.metafields.shipping | json }}
    };
    console.log("productMetaData:", productMetaData);
    {% for metaf in product.metafields %}
    console.log("product metafields:", {{ metaf | json }} );
    {% endfor %}
    {% for variant in product.variants %}
        console.log("variant", {{ variant.sku | json }}, "metafs:");
        {% for metaf in variant.metafields %}
            console.log("variant", {{ variant.sku | json }}, "metaf", {{ metaf | json }} );
        {% endfor %}
    {% endfor %}
    var metaData = { {{ meta_data }} };
    console.log("variant meta:", metaData);
</script>


<!-- Skripte die hier nicht hingehören -->
{% if settings.style_thumb_image == 'horizontal'%}
    <script>
        jQuery(document).ready(function(){
            jQuery('#zt_list_product li').first().find('a').addClass('zoomGalleryActive');
            jQuery(".thumb-image-mobile").owlCarousel({
                itemsCustom : [[320, 1],[767, 1],[768, 1],[1024, 2],[1025, 1],[1600, 1]],pagination : true,navigation : true,navigationText : ['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>']
            });
            if (jQuery(window).width() > 767) {jQuery(document).ready(function() {jQuery("#zt_list_product ul").jcarousel({vertical: true}).css("visibility", "visible");jQuery(".product-img-box").addClass("has-jcarousel");jQuery(".thumbs").css("visibility", "visible")});}
        });
    </script>
    {{ 'jquery.jcarousel.latest.min.js' | asset_url | script_tag }}
{% endif %}
{% if settings.style_thumb_image == 'vertical'%}
    <script>
        jQuery(window).load(function() { 
            jQuery('#zt_list_product .owl-wrapper .owl-item').first().find('a').addClass('zoomGalleryActive');
        });
jQuery(document).ready(function(){
    jQuery("#zt_list_product").owlCarousel({
        itemsCustom : [[320, 1],[767, 3],[768, 3],[1024, 3],[1025, 3],[1600, 3]],
        pagination : true,navigation : true,navigationText : ['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>']
    });
});
    </script>
    {{ 'owl.carousel.min.js' | asset_url | script_tag }}
{% endif %}
{% if settings.style_thumb_image == 'ticky'%}
    <script>
        if (jQuery(window).width() > 767) {
            jQuery(document).ready(function(){ if ($('.typo-main')[0]) {jQuery(window).resize(function () {if (jQuery(window).width() > 768) {var wraper_product, item_product, maxMove_product, item, sticky_image;wraper_product = $('.typo-main #product').outerHeight(true);item_product = $('.product-shop > div').outerHeight(true);maxMove_product = wraper_product - item_product;$('.product-shop').data('maxMove_product', maxMove_product);sticky_image = 0;if ($('#header-content .header')[0]) {sticky_image = $('#header-content').height();console.log(sticky_image);}var wrapptoTop = $('.typo-main #product').offset().top - sticky_image;jQuery(window).bind("scroll", function () {var toTop;item = $('.product-shop');maxMove_product = item.data('maxMove_product');toTop = $(window).scrollTop() - wrapptoTop;if (toTop > 0 && toTop <= maxMove_product) {item.css('padding-top', toTop + 'px');}if ($(window).scrollTop() < wrapptoTop) {item.css('padding-top', 0 + 'px');}if (toTop > maxMove_product) {item.css('padding-top', maxMove_product + 'px');}});}}).resize();}})
        }
    </script>
{% endif %}
<script>

    function thumbs() {
        $("#zt_list_product .image-item").eq(0).addClass("active"),
            $("#zt_list_product .image-item").click(function() {var a = $(this).index();
                $("#zt_list_product .image-item").removeClass("active"),$(this).addClass("active"),$("#product_owl").trigger("owl.goTo", a)
            }),$("#zt_list_product li").length > 4 ? $(".js-thumb").removeClass("thumbs").addClass("thumbs") : $(".js-thumb").removeClass("thumbs")
    }
function changeslide() {
    var a = function() {
        jQuery(this).owlCarousel({singleItem: !0,lazyLoad: !0,dots: !0,navigation : true,
            afterInit: function(a) {     },
            afterMove: function(a) {     }
        })
    },
        b = function(b) {
            var url = "/products/" + "{{ product.handle }}" + ".js" ;
            $.getJSON( url , {
                format: "json"
            })
                .done(function( data ) {              
                    for(i=0;i<data.variants.length;i++){
                        if(data.variants[i].option1 == b && data.variants[i].featured_image != null){
                            $("#product_owl").find("img").each(function(){
                                var mainImgSrc = data.variants[i].featured_image.src;
                                var prefix = data.variants[i].featured_image.src.split("//")[0].length;
                                var srcIngorePrefix = mainImgSrc.substring(prefix);                
                                if(srcIngorePrefix == $(this).data('image')){
                                    $("#product_owl").trigger("owl.goTo", $(this).parent().parent().index());
                                }
                            })
                        }

                    }
                })
        };
    value = $(".single-option-selector").val(), b(value)
}
$('.swatch.color .swatch-element').first().addClass('active')
$('.swatch.color .swatch-element').click(function(){
    if ($('.swatch.color.swatch-element').hasClass('active')){$('.swatch.color .swatch-element').removeClass('active');$(this).addClass('active');}else{$('.swatch.color .swatch-element').removeClass('active');$(this).addClass('active');  }
});

//Shopify.Image.preload({{ product.images | json }}, 'grande');

{% if settings.display_subtotal and product.available %} 
    //update price when changing quantity
function updatePricing() {
    //try pattern one before pattern 2
    var regex = /([0-9]+[.|,][0-9]+[.|,][0-9]+)/g;
    var unitPriceTextMatch = jQuery('.product .price').text().match(regex);

    if (!unitPriceTextMatch) {
        regex = /([0-9]+[.|,][0-9]+)/g;
        unitPriceTextMatch = jQuery('.product .price').text().match(regex);      
    }
    if (unitPriceTextMatch) {
        var unitPriceText = unitPriceTextMatch[0];      
        var unitPrice = unitPriceText.replace(/[.|,]/g,'');
        var quantity = parseInt(jQuery('#quantity').val());
        var totalPrice = unitPrice * quantity;
        var totalPriceText = Shopify.formatMoney(totalPrice, window.money_format);
        totalPriceText = totalPriceText.match(regex)[0];
        var regInput = new RegExp(unitPriceText, "g");  
        var totalPriceHtml = jQuery('.product .price').html().replace(regInput ,totalPriceText); 
        jQuery('.product .total-price span').html(totalPriceHtml);      
    }
}
jQuery('#quantity').on('change', updatePricing);
                                      {% endif %}

var selectCallback = function(variant, selector) {
    var addToCart = jQuery('#product-add-to-cart'),
        productPrice = jQuery('.product .price'),
        comparePrice = jQuery('.product .compare-price');  
    if (variant) {
        if (variant.available) {
            // We have a valid product variant, so enable the submit button
            addToCart.removeClass('disabled').removeAttr('disabled').val('{{'typo_product.detail.add_cart' | t}}');
            $('#add-to-cart-form .clear_fix').removeClass("button-unva");
        } else {
            addToCart.val('Sold Out').addClass('disabled').attr('disabled', 'disabled');
        }
        productPrice.html(Shopify.formatMoney(variant.price, "{{ shop.money_format }}"));

        if ( variant.compare_at_price > variant.price ) {
            productPrice.addClass("on-sale")
            comparePrice
                .html(Shopify.formatMoney(variant.compare_at_price, "{{ shop.money_format }}"))
                .show();
        } else {
            comparePrice.hide();
            productPrice.removeClass("on-sale");
        }
        {% if settings.use_color_swatch %}
            // BEGIN SWATCHES
        var form = jQuery('#' + selector.domIdPrefix).closest('form');
        for (var i=0,length=variant.options.length; i<length; i++) {
            var radioButton = form.find('.swatch[data-option-index="' + i + '"] :radio[value="' + variant.options[i] +'"]');
            if (radioButton.size()) {
                radioButton.get(0).checked = true;
            }
        }
        // END SWATCHES
    {% endif %}

        {% if settings.display_subtotal and product.available %}  
            updatePricing();
    {% endif %}

    } else {
        addToCart.val('Unavailable').addClass('disabled').attr('disabled', 'disabled');
    }



    if (variant.sku) {
        // SKU
        jQuery(".product-sku span.sku").text(variant.sku);

        var myMeta = metaData[variant.sku];
        var availabilityClass = '.notavailable';
        if(variant.available || myMeta.inventory_quantity > 0) {
            if(myMeta.inventory_quantity < 3) {
                availabilityClass = '.fewavailable';
            } else {
                availabilityClass = '.nowavailable';
            }
        }
        if (variant.inventory_management == null) {
            availabilityClass = '.nowavailable';
        }

        // QUANTITY
        {% if settings.display_availability %}
            // ist manchmal false
        {% endif %}
            if (variant.inventory_management!=null) {
                jQuery(".product-inventory *").hide().filter(availabilityClass).show();
            }

        // SPECS
        var attrs = ["length", "width", "depth", "height", "seatingheight", "seatingdepth", "maxlength", "diameter", "form", "feature"];
        for (var i in attrs) {
            var attr = attrs[i];
            if(myMeta.specs[attr]) {
//                console.log("show",attr);
                jQuery(".meta.specs."+attr).show().find("span").text(myMeta.specs[attr]);
            } else {
//                console.log("hide",attr);
                jQuery(".meta.specs."+attr).hide();
            }
        }
        if(myMeta.shipping.time) {
            jQuery(".meta.shipping.time").text(myMeta.shipping.time);
        } else {
            if(productMetaData.shipping.time) {
                jQuery(".meta.shipping.time").text(productMetaData.shipping.time);
            } else {
                jQuery(".meta.shipping.time").html('<a href="/page/versand">Versandinformationen</a>');
            }
        }
        if(myMeta.is_pillow_empty) {
            jQuery(".meta.shipping.time").text("3 - 4 Wochen");
        }
        if(myMeta.shipping.cost) {
            jQuery(".meta.shipping.cost").text(myMeta.shipping.cost);
        } else {
            if(productMetaData.shipping.cost) {
                jQuery(".meta.shipping.cost").text(productMetaData.shipping.cost);
            } else {
                jQuery(".meta.shipping.cost").html('<a href="/page/versand">Versandinformationen</a>');
            }
        }
    }

    if(variant.weight) {
        jQuery(".meta.weight").show().find("span").text(variant.weight / 1000);
    } else {
        jQuery(".meta.weight").hide();
    }



    if (variant && variant.featured_image) {
        var originalImage = jQuery("#product-featured-image");
        var newImage = variant.featured_image;
        var element = originalImage[0];
        function removeExtent(str){var arr = str.split("v=");if(arr[0])return arr[0];}

        Shopify.Image.switchImage(newImage, element, function (newImageSizedSrc, newImage, element) {
            jQuery('#zt_list_product img').each(function() {
                var grandSize = jQuery(this).attr('src');
                grandSize = grandSize.replace('_master','');grandSize = grandSize.replace('.jpg.jpg','.jpg');grandSize = removeExtent(grandSize);newImageSizedSrc = newImageSizedSrc.replace('https:','');newImageSizedSrc = newImageSizedSrc.replace('http:','');newImageSizedSrc = newImageSizedSrc.replace('_master','');newImageSizedSrc = newImageSizedSrc.replace('.jpg.jpg','.jpg');newImageSizedSrc = removeExtent(newImageSizedSrc);/*console.log('1ff'+newImageSizedSrc);console.log('2ff'+grandSize);*/
                if (grandSize == newImageSizedSrc) {jQuery(this).addClass('active');jQuery(this).parent().trigger('click'); return false;}
            });
        });        
    }




    // =======CUSTOM======
    changeslide();
    // ====END CUSTOM=====
    /*end of variant image*/

};
$(document).ready(function() {
    jQuery('#product_owl').each(function() {
        jQuery(this).owlCarousel({singleItem:true,lazyLoad : true,dots:false,navigation : true,navigationText : ['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],
            afterInit: function (elem) {},
            afterMove: function (elem) {}
        }); 
    });
});

jQuery(function($) {
    {% if product.available and product.variants.size > 1 %}
        new Shopify.OptionSelectors('product-selectors', {product: {{ product | json }},onVariantSelected: selectCallback, enableHistoryState: true});   
    {% if settings.use_color_swatch and product.available and product.options.size > 1 %}Shopify.linkOptionSelectors({{ product | json }});{% endif %} 
    {% if settings.use_color_swatch != true %}jQuery('.single-option-selector').selectize();jQuery('.selectize-input input').attr("disabled","disabled");{% endif %}
{% endif %}

    {% if product.options.size == 1 and product.options.first != 'Title' %}$('.selector-wrapper:eq(0)').prepend('<label>{{ product.options.first }}</label>');{% endif %}
    {% if product.variants.size == 1 and product.variants.first.title contains 'Default' %}$('.selector-wrapper').hide();{% endif %}

    // Auto-select first available variant on page load. Otherwise the product looks sold out.
    {% assign found_one_in_stock = false %}
    {% for variant in product.variants %}
        {% if variant.available and found_one_in_stock == false %}
        {% assign found_one_in_stock = true %}
    {% for option in product.options %}
        $('.single-option-selector:eq({{ forloop.index0 }})').val({{ variant.options[forloop.index0] | json }}).trigger('change');
{% endfor %}
{% endif %}
{% endfor %}

    {% if settings.display_product_reviews %}  
        var reviewsTimeout = setInterval(function() {
            if (jQuery(".spr-badge-caption").length>0) {jQuery(".spr-badge-caption").on('click', function() {jQuery('html,body').animate({scrollTop: jQuery(".panel:last").offset().top},'400');jQuery("#collapse-tab4").collapse('show');});clearInterval(reviewsTimeout);}
        },1000);
            {% endif %}
});





</script>


{% if settings.display_related_products %} 
    {% if settings.related_products_type == "tags" %}
        {% include 'related-products-by-tags' %}
    {% else %}
        {% include 'related-products' %}
    {% endif %}
{% endif %}
